<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="de"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>BlackJackController.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SE2014WS-16-BlackJack</a> &gt; <a href="index.source.html" class="el_package">de.htwg.controller</a> &gt; <span class="el_source">BlackJackController.java</span></div><h1>BlackJackController.java</h1><pre class="source lang-java linenums">package de.htwg.controller;

import de.htwg.model.Deck;
import de.htwg.model.Player;
import de.htwg.util.observer.Event;
import de.htwg.util.observer.IObserver;
import de.htwg.util.observer.Observable;
import de.htwg.view.TUI;

/**
 *
 * @author Adrian Wenger, Philipp Schultheiß
 */
/**
 * Der Controller muss beide die View und das Model kennen. da dieser für die
 * Kommunikation zwischen den Beiden sorgt
 */
public class BlackJackController extends Observable implements IBlackJackController {

    private Deck deck;
    private Player player;
    private Player dealer;
    private final static int BLACKJACK = 21;
    //view schicht fehlt, da kein Konstruktor
    private String statusLine;

    /**
     * Um den Controller bekannt zu machen müssen hier die Model,View Objekte
     * erzeugt werden
     */
<span class="nc" id="L31">    public BlackJackController() {</span>
<span class="nc" id="L32">    }</span>

    public boolean setDeck(int numOfDeck) {
<span class="nc" id="L35">        this.deck = new Deck(numOfDeck);</span>
<span class="nc" id="L36">        notifyObservers();</span>
<span class="nc" id="L37">        return true;</span>
    }

    public void setPlayer(String player) {
<span class="nc" id="L41">        this.player = new Player(player);</span>
<span class="nc" id="L42">        notifyObservers();</span>
<span class="nc" id="L43">    }</span>

    public void setDealer() {
<span class="nc" id="L46">        this.dealer = new Player(&quot;Dealer&quot;);</span>
<span class="nc" id="L47">        notifyObservers();</span>

<span class="nc" id="L49">    }</span>

    public Deck getDeck() {
<span class="nc" id="L52">        return deck;</span>
    }

    public Player getPlayer() {
<span class="nc" id="L56">        return player;</span>
    }

    public Player getDealer() {
<span class="nc" id="L60">        return dealer;</span>
    }

    public String getFirstTwoCardsPlayer() {
<span class="nc" id="L64">        player.add(deck.dealCard());</span>
<span class="nc" id="L65">        player.add(deck.dealCard());</span>
<span class="nc" id="L66">        notifyObservers();</span>

<span class="nc" id="L68">        return (player.printPlayersHand());</span>
    }

    public String getFirstTwoCardsDealer() {
<span class="nc" id="L72">        dealer.add(deck.dealCard());</span>
<span class="nc" id="L73">        dealer.add(deck.dealCard());</span>
<span class="nc" id="L74">        notifyObservers();</span>

<span class="nc" id="L76">        return (dealer.printPlayersHand());</span>
    }

    public String getCardPlayer() {
<span class="nc" id="L80">        player.add(deck.dealCard());</span>
<span class="nc" id="L81">        notifyObservers();</span>

<span class="nc" id="L83">        return (player.printPlayersHand());</span>
    }

    public String getCardDealer() {
<span class="nc" id="L87">        dealer.add(deck.dealCard());</span>
<span class="nc" id="L88">        notifyObservers();</span>

<span class="nc" id="L90">        return (dealer.printPlayersHand());</span>
    }

    public void checkIfDealerNeedsCard() {
<span class="nc bnc" id="L94" title="All 2 branches missed.">        if (dealer.getValue() &lt; BLACKJACK) {</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">            if (dealer.getValue() &lt; player.getValue()) {</span>
<span class="nc" id="L96">                getCardDealer();</span>
            }
        }
<span class="nc" id="L99">    }</span>

    /**
     * Checks BlackJack.
     *
     * @return blackjack?
     */
    public boolean hasBlackJack(Player subject) {
<span class="nc bnc" id="L107" title="All 2 branches missed.">        return subject.getValue() == BLACKJACK;</span>
    }

    public void checkGameStatus() {
<span class="nc bnc" id="L111" title="All 2 branches missed.">        if (hasBlackJack(getDealer())) {</span>
<span class="nc" id="L112">            System.out.println(&quot;You Loose! Dealer got BlackJack! GAME OVER!&quot;);</span>
<span class="nc" id="L113">            System.exit(0);</span>
        }
<span class="nc bnc" id="L115" title="All 2 branches missed.">        if (hasBlackJack(getPlayer())) {</span>
<span class="nc" id="L116">            System.out.print(&quot;BLACKJACK!!!!! You win!&quot;);</span>
<span class="nc" id="L117">            System.exit(0);</span>
        }
<span class="nc bnc" id="L119" title="All 2 branches missed.">        if (player.getValue() &gt; BLACKJACK) {</span>
<span class="nc" id="L120">            System.out.println(&quot;You loose! Value bigger than 21!&quot;);</span>
<span class="nc" id="L121">            System.exit(0);</span>
        }
<span class="nc bnc" id="L123" title="All 2 branches missed.">        if (dealer.getValue() &gt; BLACKJACK) {</span>
<span class="nc" id="L124">            System.out.println(&quot;You win! Dealer get bigger value than 21!&quot;);</span>
<span class="nc" id="L125">            System.exit(0);</span>
        }
<span class="nc bnc" id="L127" title="All 4 branches missed.">        if (player.getValue() &lt; BLACKJACK &amp;&amp; dealer.getValue() &lt; BLACKJACK) {</span>
<span class="nc" id="L128">            System.out.println(&quot;Take another card!&quot;);</span>
        }

<span class="nc" id="L131">    }</span>

    public void create() {
<span class="nc" id="L134">        statusLine = &quot;&quot;;</span>
<span class="nc" id="L135">        notifyObservers();</span>
<span class="nc" id="L136">    }</span>

    public String output() {
<span class="nc" id="L139">        return statusLine;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span></div></body></html>